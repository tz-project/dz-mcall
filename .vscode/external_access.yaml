request:
#    type: post
#    type: get
#    input: |
#       {"inputs":[{"input":"http://google.com/config","id":"aaa","pswd":"bbb"},
#                      {"input":"http://google.com/bbb","id":"aaa","pswd":"bbb"}]}

#    type: cmd
#    input: |
#        {"inputs":[{"input":"ls -al"},{"input":"pwd"}]}

    subject: "external_access"
    timeout: 2
    input: |
        {
            "inputs":
                [
                    {"name": "grafana", "type": "get", "input": "https://grafana.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "prometheus", "type": "get", "input": "https://prometheus.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "alertmanager", "type": "get", "input": "https://alertmanager.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "argocd", "type": "get", "input": "https://argocd.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "vault", "type": "get", "input": "https://vault.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "consul", "type": "get", "input": "https://consul.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "kiali", "type": "get", "input": "https://kiali.istio-system.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "jaeger", "type": "get", "input": "https://jaeger.istio-system.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "jenkins", "type": "get", "input": "https://jenkins.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "sonarqube", "type": "get", "input": "https://sonarqube.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "es.elk", "type": "get", "input": "https://es.elk.eks-main-t.seerslab.io", "expect": "401"},
                    {"name": "kibana", "type": "get", "input": "https://kibana.elk.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
                    {"name": "supabase", "type": "get", "input": "http://supabase.default.eks-main-t.seerslab.io", "expect": "200|301 Moved Permanently"},
        
                    {"name": "redis.hypen-dev", "type": "cmd", "input": "telnet redis.hypen-dev.hypen.ai 6379", "expect": "Escape character is"},
                    {"name": "redis.mc20-dev", "type": "cmd", "input": "telnet redis.mc20-dev.seerslab.io 6379", "expect": "Escape character is"},
                    {"name": "redis.mtown-dev", "type": "cmd", "input": "telnet redis.mtown-dev.mirrortown.io 6379", "expect": "Escape character is"},
                    {"name": "mysql.hypen-dev", "type": "cmd", "input": "telnet mysql.hypen-dev.hypen.ai 3306", "expect": "Escape character is"},
                    
                    {"name": "mysql.mtown-dev", "type": "cmd", "input": "telnet mysql.mtown-dev.seerslab.io 3306", "expect": "Escape character is"},
                    {"name": "mariadb.mtown-dev", "type": "cmd", "input": "telnet mariadb.mtown-dev.seerslab.io 3306", "expect": "Escape character is"},
                    {"name": "mysql.avatar-dev", "type": "cmd", "input": "telnet mysql.avatar-dev.seerslab.io 3306", "expect": "Escape character is"},
                    {"name": "mysql.mc20-dev", "type": "cmd", "input": "telnet mysql.mc20-dev.seerslab.io 3306", "expect": "Escape character is"},
                    {"name": "mysql.mtown-dev", "type": "cmd", "input": "telnet mysql.mtown-dev.mirrortown.io 3306", "expect": "Escape character is"},

                    {"name": "mysql.hypen", "type":"cmd", "input":"telnet mysql.hypen.hypen.ai 3306", "expect": "Escape character is"},
                    {"name": "redis.hypen", "type":"cmd", "input":"telnet redis.hypen.hypen.ai 6379", "expect": "Escape character is"},
                    {"name": "mysql.mc20", "type":"cmd", "input":"telnet mysql.mc20.seerslab.io 3306", "expect": "Escape character is"},
                    {"name": "redis.mc20", "type":"cmd", "input":"telnet redis.mc20.seerslab.io 6379", "expect": "Escape character is"},
        
                    {"name": "bastion", "type": "cmd", "input": "telnet bastion.eks-main-t.seerslab.io 22", "expect": "Escape character is"},
                    {"name": "bastion-mcall", "type": "cmd", "input": "telnet bastion-mcall.eks-main-t.seerslab.io 22", "expect": "Escape character is"},
                    
                    {"name": "prodm-stg", "type": "get", "input": "https://prodm-stg.seerslab.io/api/v1/healthcheck", "expect": "200|301 Moved Permanently"}
                ]
        }
response:
    format: json    # plan, json
#    encoding:
#        type: url   # std, url
    es:
        host: https://es.elk2.eks-main-t.seerslab.io:9200
        id: elastic
        password: DEVOPS_ADMIN_PASSWORD
        index_name: mcall_data

    smtp: |
        {"smtps":
        [
            {"name": "gmail", "host": "smtp.gmail.com:465", "sender": "doohee@seerslab.com", "user": "cms@seerslab.com", "password": "TldpadpTmTlzmflt"},
            {"name": "ses", "host": "email-smtp.ap-northeast-2.amazonaws.com:465", "sender": "doohee@seerslab.com", "user": "AKIAU4UGZGP7FQD7WKGP", "password": "BBxbndVmElqiQgFTPQWgKpBm4fFvn6RLxFUSVS/ZWeXK"}
        ]}
    slack: |
        {"slacks":
        [
            {"name": "channel1", "api_url": "aHR0cHM6Ly9ob29rcy5zbGFjay5jb20vc2VydmljZXMvVDA0S0tKQU5HMVovQjA2NFEwQ0M4S0EvcG5Ld2hHYnBOOUwwZ1E1YVdaNWtteFhxCg="},
            {"name": "channel2", "api_url": "aHR0cHM6Ly9ob29rcy5zbGFjay5jb20vc2VydmljZXMvVDBBM0pKSDZEL0IwMjI2NDNFUlROL3RxTEF0OUxXd3hSZHQ5RXhDcUo2VnhNUQo="}
        ]}
    receiver: |
        {"receivers":
        [
            {"name": "doohee.hong", "channel": "smtp/ses", "email":"devops@seerslab.com"},
            {"name": "devops", "channel": "slack/channel1"}
        ]}
#admin_password='elastic:DEVOPS_ADMIN_PASSWORD'
#esUrl=https://es.elk.eks-main-t.seerslab.io
#indexName=mcall_data
#curl -k -XDELETE -u ${admin_password} ${esUrl}/${indexName}
#curl -k -XPUT -u ${admin_password} ${esUrl}/${indexName} -H 'Content-Type: application/json'
#-d '{
#    "mappings": {
#        "properties": {
#            "errorCode": {
#                "type": "integer"
#            },
#            "input": {
#                "type": "text"
#            },
#            "expect": {
#                "type": "text"
#            },
#            "result": {
#                "type": "text"
#            },
#            "ts": {
#                "type": "date",
#                "format":"yyyy-MM-dd'T'HH:mm:ss.SSS"
#            }
#        }
#    }
#}'
#curl -k -XPOST -u ${admin_password} ${esUrl}/${indexName}/doc -H "Content-Type: application/json" -d @test.json

worker:
    number: 20

log:
    level: debug
    file: /app/log/mcall.log

webserver:
    enable: false
    host: 0.0.0.0
    port: 3000

